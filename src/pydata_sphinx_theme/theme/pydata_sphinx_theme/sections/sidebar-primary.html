{% block docs_sidebar %}
{# Create sidebar TOC links HTML here; if it's empty we'll skip adding its container #}
{%- set pst_ns = namespace(
  sidebar_nav_html=generate_toctree_html(
    "sidebar",
    show_nav_level=theme_show_nav_level|int,
    maxdepth=theme_navigation_depth|int,
    collapse=theme_collapse_navigation|tobool,
    includehidden=True,
    titles_only=True
    )
  )
-%}
{# If we have no sidebar links, pop the links component from the sidebar list #}
{% if pst_ns.sidebar_nav_html | length == 0 %}
  {% set sidebars = sidebars | reject("in", "sidebar-nav-bs.html") | list %}
{% endif %}

{% if theme_navbar_center or theme_navbar_end or sidebars or theme_primary_sidebar_end %}
  {# Header items that will be displayed in the sidebar on mobile #}
  <div class="sidebar-header-items sidebar-primary__section">
    {# The header center items #}
    {% if theme_navbar_center %}
      <div class="sidebar-header-items__center">
        {% for navbar_item in theme_navbar_center %}
          <div class="navbar-item">{% include navbar_item %}</div>
        {% endfor %}
      </div>
    {% endif %}
    {# The header end items #}
    {% if theme_navbar_end %}
      <div class="sidebar-header-items__end">
        {% for navbar_item in theme_navbar_end %}
          <div class="navbar-item">{% include navbar_item %}</div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
  {% if sidebars %}
    <div class="sidebar-primary-items__start sidebar-primary__section">
      {%- for sidebartemplate in sidebars %}
        <div class="sidebar-primary-item">{%- include sidebartemplate %}</div>
      {%- endfor %}
    </div>
  {% endif %}
  {# Items that will snap to the bottom of the screen #}
  <div class="sidebar-primary-items__end sidebar-primary__section">
    {%- for sidebartemplate in theme_primary_sidebar_end %}
      <div class="sidebar-primary-item">{%- include sidebartemplate %}</div>
    {%- endfor %}
  </div>
  {# add the rtd flyout in the sidebar if existing #}
  <div id="rtd-footer-container"></div>
{% endif %}
{% endblock docs_sidebar %}
